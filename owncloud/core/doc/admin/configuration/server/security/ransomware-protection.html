<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Mitigating Ransomware Risks in ownCloud &#8212; ownCloud 10.0.4 Server Administration Manual 10.0.4 documentation</title>
    <link rel="stylesheet" href="../../../_static/" type="text/css" />
    <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/main.min.css" type="text/css" />
    <link rel="stylesheet" href="../../../_static/styles.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../',
        VERSION:     '10.0.4',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../../../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../../../_static/bootstrap-3.1.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../../../_static/bootstrap-sphinx.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Reverse Proxy Configuration" href="../reverse_proxy_configuration.html" />
    <link rel="prev" title="Password Policy" href="password-policy.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="theme-color" content="#1d2d44">

  </head>
  <body>


<div class="wrap container not-front">
  <div class="content row">
  <main class="main">
    <div class="row page-content-header">
      <div class="col-md-5 col-md-offset-7">
      
        <form class="headersearch" style="margin-bottom:-3px;" action="../../../search.html" method="get">
        <input type="text" value="" name="q" id="q" class="form-control" /> 
        <button  class="btn btn-default" type="submit" id="searchsubmit">Search</button>
        </form>
      
      </div>
    </div>
    
			<div class="row">
				<div class="col-md-3">
					<div class="sidebar">
							<div class="menu-support-container">
								<ul id="menu-support" class="menu">
									<ul>
										
<li><a href="../../../contents.html">Table of Contents</a></li>
									</ul>
                  <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../index.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../release_notes.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../whats_new_admin.html">What’s New in ownCloud 10.0.4</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../installation/index.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../upgrading/index.html">Upgrading</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">Configuration</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../database/index.html">Database Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../files/index.html">File Sharing and Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../ldap/ldap_proxy_cache_server_setup.html">How To Install and Configure an LDAP Proxy-Cache Server</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../mimetypes/index.html">Mimetypes Management</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html">Server Configuration</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../security_setup_warnings.html">Warnings on Admin Page</a></li>
<li class="toctree-l3"><a class="reference internal" href="../import_ssl_cert.html">Importing System-wide and Personal SSL Certificates</a></li>
<li class="toctree-l3"><a class="reference internal" href="../occ_command.html">Using the occ Command</a></li>
<li class="toctree-l3"><a class="reference internal" href="../activity_configuration.html">Configuring the Activity App</a></li>
<li class="toctree-l3"><a class="reference internal" href="../antivirus_configuration.html">Virus Scanner Support</a></li>
<li class="toctree-l3"><a class="reference internal" href="../caching_configuration.html">Memory Caching</a></li>
<li class="toctree-l3"><a class="reference internal" href="../background_jobs_configuration.html">Background Jobs</a></li>
<li class="toctree-l3"><a class="reference internal" href="../config_sample_php_parameters.html">Config.php Parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="../email_configuration.html">Email Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../excluded_blacklisted_files.html">Excluding Directories and Blacklisting Files</a></li>
<li class="toctree-l3"><a class="reference internal" href="../external_sites.html">Linking External Sites</a></li>
<li class="toctree-l3"><a class="reference internal" href="../custom_client_repos.html">Custom Client Download Repositories</a></li>
<li class="toctree-l3"><a class="reference internal" href="../knowledgebase_configuration.html">Knowledge Base Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../language_configuration.html">Language Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../logging_configuration.html">Logging Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../harden_server.html">Hardening and Security Guidance</a></li>
<li class="toctree-l3"><a class="reference internal" href="password-policy.html">Password Policy</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Mitigating Ransomware Risks in ownCloud</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reverse_proxy_configuration.html">Reverse Proxy Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../thirdparty_php_configuration.html">Using Third Party PHP Components</a></li>
<li class="toctree-l3"><a class="reference internal" href="../js_css_asset_management_configuration.html">JavaScript and CSS Asset Management</a></li>
<li class="toctree-l3"><a class="reference internal" href="../automatic_configuration.html">Automatic Configuration Setup</a></li>
<li class="toctree-l3"><a class="reference internal" href="../oc_server_tuning.html">ownCloud Server Tuning</a></li>
<li class="toctree-l3"><a class="reference internal" href="../index_php_less_urls.html">Enable index.php-less URLs</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../user/index.html">User Management</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../maintenance/index.html">Maintenance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../issues/index.html">Issues and Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../enterprise/index.html">Enterprise Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../appliance/index.html">The ownCloud X Appliance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../faq/index.html">FAQ</a></li>
</ul>

								</ul>
							</div>
					</div>
				</div>
        

				<div class="col-md-9">
					<div class="page-content">
            
<ul class="prevnext-title list-unstyled list-inline">
  <li class="prev">
    <a href="password-policy.html" title="Previous Chapter: Password Policy"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm">&laquo; Password Policy</span>
    </a>
  </li>
  <li class="next">
    <a href="../reverse_proxy_configuration.html" title="Next Chapter: Reverse Proxy Configuration"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm">Reverse Proxy... &raquo;</span>
    </a>
  </li>
</ul>
						
  <div class="section" id="mitigating-ransomware-risks-in-owncloud">
<h1>Mitigating Ransomware Risks in ownCloud<a class="headerlink" href="#mitigating-ransomware-risks-in-owncloud" title="Permalink to this headline">¶</a></h1>
<p>Ransomware is <a class="reference external" href="https://www.google.de/search?q=ransomeware&amp;source=lnms&amp;tbm=nws&amp;sa=X&amp;ved=0ahUKEwiqmvL9rdfXAhWCyaQKHSkgDosQ_AUICigB&amp;biw=1680&amp;bih=908">an ever-present threat</a>, both for large enterprises as well as for individuals.
Once infected, a whole hard disk (or just parts of it) can become encrypted, leading to unrecoverable data loss.</p>
<p>Once this happens, attackers normally ask victims to pay a ransom, often via cryptocurrencies such as Bitcoin, in exchange for the decryption key required to decrypt their data.</p>
<p>While paying the ransom works in some cases, it is not recommended, as there is no guarantee that the attackers will supply the key after payment is made.
To help mitigate such threats and ensure ongoing access to user data, ownCloud provides the Ransomware Protection app.</p>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">It is essential to be aware that user data needs to be synchronized with you ownCloud Server using the ownCloud Desktop synchronization client. Data that is not synchronized and stored in ownCloud cannot be protected.</p>
</div>
<div class="section" id="about-ransomware-protection">
<h2>About Ransomware Protection<a class="headerlink" href="#about-ransomware-protection" title="Permalink to this headline">¶</a></h2>
<p>The app is tasked with <em>detecting</em>, <em>preventing</em>, and <em>reverting</em> anomalies.
Anomalies are file operations (including <em>create</em>, <em>update</em>, <em>delete</em>, and <em>move</em>) that are not intentionally conducted by the user.
It aims to do so in two ways: <a class="reference external" href="ransomeware_prevention_label">prevention</a>, and <a class="reference external" href="ransomeware_protection_label">protection</a>.</p>
<div class="section" id="prevention-blocking-common-ransomware-file-extensions">
<span id="ransomeware-prevention-label"></span><h3>Prevention: Blocking Common Ransomware File Extensions<a class="headerlink" href="#prevention-blocking-common-ransomware-file-extensions" title="Permalink to this headline">¶</a></h3>
<p>Like other forms of cyberattack, Ransomware has a range of diverse characteristics.
On the one hand it makes them hard to detect and on the other makes them even harder to prevent.
Recent ransomeware attacks either encrypt a user’s files and add a certain file extension to them (e.g., “.crypt”) or they replace the original files with an encrypted copy and a certain file extension.</p>
<p>The first line of defense against such threats is a blacklist that blocks uploading files with file extensions known to originate from ransomeware.
Ransomware Protection ships with <a class="reference external" href="https://fsrm.experiant.ca">a static extension list</a> of around 1,500 file extensions.
As new extensions are regularly created this list needs maintenance.
Future releases of Ransomware Protection will include an updated list and the ability to update the list via syncing with <a class="reference external" href="https://fsrm.experiant.ca/api/v1/combined">FSRM’s API</a> by using <a class="reference internal" href="../occ_command.html"><span class="doc">occ</span></a>.</p>
</div>
<div class="section" id="protection-data-retention-and-rollback">
<span id="ransomeware-protection-label"></span><h3>Protection: Data Retention and Rollback<a class="headerlink" href="#protection-data-retention-and-rollback" title="Permalink to this headline">¶</a></h3>
<p>While Ransomware Prevention mitigates risks of a range of ransomeware attacks, it is not a future-proof solution, because ransomeware is becoming ever-more sophisticated.
There are known attacks that change file extensions randomly or keep them unchanged which makes them harder to detect.</p>
<p>Ultimately there is a consensus that only one solution can provide future-proof protection from ransomeware attacks: retaining data and providing the means to roll back to a particular point in time.</p>
<p>ownCloud Ransomware Protection will, therefore, record all changes on an ownCloud Server and allow administrators to rollback user data to a particular point in time, making use of ownCloud’s integrated Versioning and Trash bin features.</p>
<p>Doing so allows all user data that is synchronized with the server to be rolled back to its state before the attack occurred.
A combination of Ransomware prevention and protection reduces risks to a minimum acceptable level.</p>
</div>
<div class="section" id="other-elements-of-ransomware-protection">
<h3>Other Elements of Ransomware Protection<a class="headerlink" href="#other-elements-of-ransomware-protection" title="Permalink to this headline">¶</a></h3>
<table border="1" class="docutils">
<colgroup>
<col width="18%" />
<col width="40%" />
<col width="42%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Name</th>
<th class="head">Command</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Ransomguard Scanner</td>
<td><code class="docutils literal"><span class="pre">occ</span> <span class="pre">ransomguard:scan</span> <span class="pre">&lt;timestamp&gt;</span> <span class="pre">&lt;user&gt;</span></code></td>
<td>A command to scan the ownCloud database for
changes in order to discover anomalies in a
user’s account and their origin. It enables an
administrator to determine the point in time
where undesired actions happened as a
prerequisite for restoration.</td>
</tr>
<tr class="row-odd"><td>Ransomguard Restorer</td>
<td><code class="docutils literal"><span class="pre">occ</span> <span class="pre">ransomguard:restore</span> <span class="pre">&lt;timestamp&gt;</span> <span class="pre">&lt;user&gt;</span></code></td>
<td>A command for administrators to revert all
operations in a user account that occurred after
a certain point in time.</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last"><code class="docutils literal"><span class="pre">&lt;timestamp&gt;</span></code> must be in <cite>the Linux timestamp format</cite>.</p>
</div>
</div>
<div class="section" id="requirements">
<h3>Requirements<a class="headerlink" href="#requirements" title="Permalink to this headline">¶</a></h3>
<ol class="arabic simple">
<li><strong>Ransomware Protection.</strong> Ransomware protection needs to be in operation before an attack occurs, as it needs to record file operations to be able to revert them, in case of an attack.</li>
<li><strong>ownCloud Versions App.</strong> Required to restore older file versions. The capabilities of Ransomware Protection depend on its configuration regarding version retention.</li>
<li><strong>ownCloud Trash Bin App.</strong> Required to restore deleted files. The capabilities of Ransomware Protection depend on its configuration regarding trash bin retention.</li>
</ol>
</div>
<div class="section" id="limitations">
<h3>Limitations<a class="headerlink" href="#limitations" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Ransomware Protection works with master-key based storage encryption. With credential-based storage encryption, only Ransomware Prevention (Blocking) works.</li>
<li>Rollback is not based on snapshots:<ul>
<li>The <a class="reference external" href="https://doc.owncloud.com/server/10.0/admin_manual/configuration/server/config_sample_php_parameters.html?highlight=trash%20bin#deleted-items-trash-bin">trash bin retention policy</a> may delete files, making them unrecoverable. To avoid this, set <code class="docutils literal"><span class="pre">trashbin\_retention\_obligation</span></code> to <code class="docutils literal"><span class="pre">disabled</span></code>, or choose a conservative policy for trash bin retention. However, please be aware that this may increase storage requirements.</li>
<li>Trash bin items may be deleted by the user making them unrecoverable by Ransomware Protection =&gt; Users need to know this.</li>
<li>Versions have <a class="reference external" href="https://doc.owncloud.com/server/10.0/admin_manual/configuration/server/config_sample_php_parameters.html?highlight=trash%20bin#file-versions">a built-in “thin-out” policy</a> which makes it possible that required file versions are unrecoverable by Ransomware Protection. To help avoid this, set <code class="docutils literal"><span class="pre">versions\_retention\_obligation</span></code> to <code class="docutils literal"><span class="pre">disabled</span></code> or choose a conservative policy for version retention. Please be aware that this might increase your storage needs.</li>
<li>A specific version of a file that is needed for rollback might have been manually restored, making this version potentially unrecoverable by Ransomware Protection. Currently, after restoration the restored version <cite>is not a version anymore</cite>, e.g., the version is not present in versioning.</li>
</ul>
</li>
<li>Contents in secondary storages, such as <em>Windows network drives</em>, <em>Dropbox</em>, and <em>Google Drive</em>, are unrecoverable by Ransomware Protection, because they do not have versioning or trash bin enabled in ownCloud.</li>
<li>Rolling files forward is not <em>currently</em> supported or tested. Therefore it is vital to:<ul>
<li>Carefully decide the point in time to rollback to.</li>
<li>To have proper backups to be able to conduct the rollback again, if necessary.</li>
</ul>
</li>
</ul>
</div>
</div>
</div>


            
<ul class="prevnext-title list-unstyled list-inline">
  <li class="prev">
    <a href="password-policy.html" title="Previous Chapter: Password Policy"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm">&laquo; Password Policy</span>
    </a>
  </li>
  <li class="next">
    <a href="../reverse_proxy_configuration.html" title="Next Chapter: Reverse Proxy Configuration"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm">Reverse Proxy... &raquo;</span>
    </a>
  </li>
</ul>
					</div>
				</div>
			</div>
  </main>  
  </div>
</div>
  </body>
</html>